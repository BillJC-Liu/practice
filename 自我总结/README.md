# 针对一些面试题的自我总结
# HTTP
### http的三次握手四次挥手过程
1. 概念：HTTP协议是因特网上应用最为广泛的一种网络传输协议，所有的WWW文件必须遵循这个标准。
2. HTTP是一个基于TCP/IP通信协议来传递数据。
3. 网络模型
  
  ![五层网络模型图](./1.http/五层网络模型.png)

  从图中可知，http位于应用层，TCP位于传输层。

  以下是低三层的作用：
  * 物理层主要作用是定义物理设备如何传输数据（网口，网线，光缆等）。
  * 数据链路层在通信实体间建立数据链路连接。
  * 网络层为数据在结点之间传输创建逻辑链路。
4. 为什么要进行TCP的三次握手？
  * 主要是为了防止服务端开启一些无用的链接。对对方做的请求做出答复，是否是关闭，是否是需要开启请求。例如，客户端对服务端发送第一次握手，服务端做了相应，而此时客户端关闭，导致服务端的端口会一直处于等待的状态，浪费资源。
  
  ![握手流程](./1.http/握手时序图.png)

  * TCP的三次握手实际上是发送三个报文段。（创建链接） <br/>
    <!-- * 第一次握手：客户端发送一个数据包给服务端，SYN标志位为1，Seq=X
    * 第二次握手：服务端发送一个数据包给客户端，SYN标志位为1，ACK=上面的Seq+1 = X+1，Seq=Y
    * 第三次握手：客户端发送一个数据包给客户端，ACK=Y+1，Seq=z -->

     第一次握手：主机A发往主机B，主机A的初始序号是X，设置SYN位，未设置ACK位

　   第二次握手：主机B发往主机A，主机B的初始序号是Y，确认号(ACK)是X+1，X+1确认号暗示己经收到主机A发往主机B的同步序号。设置SYN位和ACK位

　  第三次握手：主机A发往主机B，主机A的序号是X+1，确认号是Y+1，Y+1确认号暗示已经收到主机B发往主机A的同步序号。设置ACK位，未设置SYN位

  * TCP的四次挥手，实际上是发送4个报文段（断开链接） <br/>
     
     第一次挥手：客户端发送一个FIN段，并包含一个希望接受者看到的自己当前的序列号K。他欧诺个时还包含一个ACK表示确认对方最近一次发过来的数据。
     
     第二次挥手：服务端将K值加1作为ACK序号之，表名收到了上一个包。这时上层的应用程序会被告知另一端发起了关闭操作，通常这将引起应用程序发起自己的关闭操作。
     
     第三次挥手：服务端发起自己的FIN段，ACK=K+1，Seq=L。
     
     第四次挥手：客户端确认 ACK=L+1。

  * 为什么要四次挥手?
    这是因为服务端在LISTEN状态下，收到建立链接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。而关闭链接时，当收到对方的FIN报文时，仅仅表示对方不在发送数据了，但是还是能接收数据，己方是否现在关闭发送数据通道，需要上层应用来决定，因此，己方ACK和FIN一般都会分开发送。

### HTTP报文
  ![报文格式](./1.http/报文格式.png)


### URI、URL、URN
  * URI：统一资源标志符，是包含URL和URN总合的一个定义。特定某一个资源而去设置的，用来唯一标识互联网上的信息资源。将http://www.baidu.com指向到百度的页面（其中也涉及到DNS域名解析服务器）。
  * URL：统一的资源定位器。
  * URN：永久统一资源定位符。在资源移动之后还能被找到，目前还没有非常成熟的使用方案。

### HTTPS
  1. HTTP是明文传输的，类似裸奔。容易被劫持。
  2. HTTPS为什么是安全的？
    * 公钥放在公网上每个人都能拿到的加密字符串。加密字符串是用来加密传输的信息的，只有服务器上有私钥来对加密后的数据进行解密。中间过程中，中间人是无法拿到私钥的，因为私钥只放在服务器上。公钥和私钥主要是在握手的过程中进行传输。

  ![HTTPS握手过程](./1.http/HTTPS握手过程.png)

  * 第一次握手：客户端生成一个随机数Random及加密套件给服务端，服务端接受客户端发来的随机数和加密套件后，选择一个它认为合适的加密套件
  * 第二次握手：服务端生成一个随机数，将该随机数和服务端证书发给客户端，客户端根据服务端发来的证书进行生成一个预主秘钥
  * 第三次握手：将证书生成的预主秘钥加密，生成一个随机数，将随机数和加密后的预主秘钥发给服务端，但该随机数是不能被中间人拿到的，只有客户端和服务端知道的随机数。服务端将加密的预主秘钥进行私钥解密。
  * 第四次握手：服务端和客户端将前三次握手生成的随机数进行一个算法操作。进行加密数据传输，这里中间人无法解密，因为中间人没有私钥，同时也没有第三次握手时生成的随机数，所以保证了数据传输的安全性。

<br />
# 从URL输入到页面渲染的过程

  1. 浏览器构建HTTP Request请求
  2. 网络传输
  3. 服务器构建HTTP Response响应
  4. 网络传输
  5. 浏览器渲染页面
  
  ![流程图1](./1.http/URL1.png)

  ![流程图2](./1.http/URL2.png)

#### 构建请求
  1. 应用层进行DNS解析。DNS将域名解析成IP地址。
  2. 应用层生成HTTP请求报文。（报文格式见上文）
  3. 传输层简历TCP链接。HTTP协议使用的是TCP协议。（具体的TCP握手过程见上文）
  4. 网络层使用IP协议来选择路线
  5. 数据链路层实现网络相邻节点间可靠的数据通信
  6. 物理层传输数据
  **总结：**<br/>
  上面的6个步骤可总结为：DNS解析URL地址；HTTP生成报文；构建TCP链接；使用IP协议选择传输路线；数据链路层保证数据的可靠传输；物理层将数据转换成电子、光学或微波信号进行传输。

#### 网络传输
  从客户机到服务器需要通过许多网络设备，一般地，包括集线器，交换器，路由器等。
 